@{
    Layout = null;
}
<div class="header">完成任务</div>
<div class="content">
    <div class="ui form tiny">
        <input type="hidden" id="TaskID" value="@ViewBag.TaskID">
        <div class="field five wide">
            <label>完成状态</label>
            <div class="ui selection dropdown">
                <input type="hidden" id="Agree" value="true">
                <i class="dropdown icon"></i>
                <div class="default text"></div>
                <div class="menu">
                    <div class="item" data-value="true">正常结束</div>
                    <div class="item" data-value="false">异常终止</div>
                </div>
            </div>
        </div>
        <div class="field">
            <label>备注</label>
            <textarea rows="5" id="Remark"></textarea>
        </div>
    </div>
</div>
<script>
    var modal_action = {
        handOver: function () {
            if (event && event.currentTarget) {
                var target = event.currentTarget;
                var data = $(target).parents('.ui.modal').find('.ui.form').getdata();
                ajax.post('/Tasks/Done', data, function () {
                    if (target) { $(target).load_show(); }
                }, function (success, data) {
                    if (target) {
                        $(target).load_hide();
                    }
                    if (success && data.Success) {
                        window.location.reload();
                    }
                });
            }
        }
    };
</script>
<div class="actions">
    <button class="ui button green small" onclick="modal_action.handOver()">保存</button>
    <button class="ui button cancel black small">取消</button>
</div>